import{q as C,r as l,m as h,s as k,c as w,o as n,w as x,f as _,a as e,e as y,t as i,h as c,v as V,i as B,k as M,B as A,u as G}from"./index-BCxpIQ8Y.js";import{_ as S}from"./TopHeader.vue_vue_type_script_setup_true_lang-DUatdJE8.js";import{u as N}from"./absenceStore-C9VTbf9Q.js";const R="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='%236B7280'%20%3e%3c!--%20Kepala%20--%3e%3ccircle%20cx='12'%20cy='8'%20r='4'%20/%3e%3c!--%20Badan%20--%3e%3cpath%20d='M4%2020c0-4%203.5-7%208-7s8%203%208%207'%20/%3e%3c/svg%3e",T="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='1000px'%20height='1000px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12%2016C13.6569%2016%2015%2014.6569%2015%2013C15%2011.3431%2013.6569%2010%2012%2010C10.3431%2010%209%2011.3431%209%2013C9%2014.6569%2010.3431%2016%2012%2016Z'%20stroke='%23ffffff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M3%2016.8V9.2C3%208.0799%203%207.51984%203.21799%207.09202C3.40973%206.71569%203.71569%206.40973%204.09202%206.21799C4.51984%206%205.0799%206%206.2%206H7.25464C7.37758%206%207.43905%206%207.49576%205.9935C7.79166%205.95961%208.05705%205.79559%208.21969%205.54609C8.25086%205.49827%208.27836%205.44328%208.33333%205.33333C8.44329%205.11342%208.49827%205.00346%208.56062%204.90782C8.8859%204.40882%209.41668%204.08078%2010.0085%204.01299C10.1219%204%2010.2448%204%2010.4907%204H13.5093C13.7552%204%2013.8781%204%2013.9915%204.01299C14.5833%204.08078%2015.1141%204.40882%2015.4394%204.90782C15.5017%205.00345%2015.5567%205.11345%2015.6667%205.33333C15.7216%205.44329%2015.7491%205.49827%2015.7803%205.54609C15.943%205.79559%2016.2083%205.95961%2016.5042%205.9935C16.561%206%2016.6224%206%2016.7454%206H17.8C18.9201%206%2019.4802%206%2019.908%206.21799C20.2843%206.40973%2020.5903%206.71569%2020.782%207.09202C21%207.51984%2021%208.0799%2021%209.2V16.8C21%2017.9201%2021%2018.4802%2020.782%2018.908C20.5903%2019.2843%2020.2843%2019.5903%2019.908%2019.782C19.4802%2020%2018.9201%2020%2017.8%2020H6.2C5.0799%2020%204.51984%2020%204.09202%2019.782C3.71569%2019.5903%203.40973%2019.2843%203.21799%2018.908C3%2018.4802%203%2017.9201%203%2016.8Z'%20stroke='%23fff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",j={class:"p-4 space-y-4"},H={class:"text-lg font-semibold"},D={class:"relative w-40 h-40 mx-auto"},K=["src"],L={key:1,class:"w-full h-full flex items-center justify-center rounded-full"},U={class:"p-2 border rounded-md bg-gray-100"},$={key:0},P=["disabled"],z={__name:"AbsensView",setup(Z){const d=G(),p=C(),m=N();console.log(p.params.type);const r=l(p.params.type==="masuk"),a=h(()=>m.photo),u=l(""),t=l({status:"Mengambil lokasi...",coords:null});l(!1);const g=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(s=>{t.value={status:"Lokasi ditemukan",coords:`${s.coords.latitude}, ${s.coords.longitude}`}},()=>{t.value.status="Gagal mengambil lokasi"}):t.value.status="Geolocation tidak didukung"},v=()=>{d.push("/menu/absensi/take-photo")},f=()=>{const s={type:r.value?"masuk":"keluar",photo:a.value,note:u.value,location:t.value.coords};console.log("Data Absensi:",s),m.setAttendance(s),d.push("/success")};return k(()=>{g()}),(s,o)=>(n(),w(A,null,{default:x(()=>[_(S,{title:"Absensi "+(r.value?"Masuk":"Keluar")},null,8,["title"]),e("div",j,[e("h1",H,"Absensi "+i(r.value?"Masuk":"Keluar"),1),e("div",D,[a.value?(n(),c("img",{key:0,src:a.value,class:"w-full h-full rounded-full border border-gray-300 object-cover"},null,8,K)):(n(),c("div",L,o[1]||(o[1]=[e("img",{src:R,class:"border-2 border-slate-500 rounded-full"},null,-1)]))),e("button",{onClick:v,class:"absolute bottom-0 left-3/4 transform -translate-x-1/2 bg-blue-400 text-white p-2 rounded-full hover:bg-blue-500"},o[2]||(o[2]=[e("img",{src:T,alt:""},null,-1)]))]),y(e("textarea",{"onUpdate:modelValue":o[0]||(o[0]=b=>u.value=b),class:"w-full min-h-[100px] p-2 border rounded-md",placeholder:"Tambahkan catatan (opsional)"},null,512),[[V,u.value]]),e("div",U,[e("p",null,[o[3]||(o[3]=e("strong",null,"Lokasi:",-1)),M(" "+i(t.value.status),1)]),t.value.coords?(n(),c("p",$,"üìç "+i(t.value.coords),1)):B("",!0)]),e("button",{onClick:f,disabled:!a.value,class:"w-full px-4 py-2 font-semibold text-white bg-blue-500 rounded-md hover:bg-blue-700 disabled:bg-gray-300"}," Submit Absensi ",8,P)])]),_:1}))}};export{z as default};
